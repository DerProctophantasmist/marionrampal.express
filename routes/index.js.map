{
  "version": 3,
  "file": "index.js",
  "sourceRoot": "..",
  "sources": [
    "routes/index.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,OAAA,EAAA,GAAA,EAAA,GAAA,EAAA,MAAA,EAAA;;EAAA,OAAA,GAAU,OAAA,CAAQ,SAAR;;EACV,MAAA,GAAS,OAAO,CAAC,MAAR,CAAA;;EAET,GAAA,GAAM,OAAA,CAAQ,mBAAR,CAA4B,CAAC;;EACnC,GAAA,GAAM,OAAA,CAAQ,KAAR;;EAGN,GAAG,CAAC,cAAJ,CAAmB,aAAnB,EAAkC,QAAA,CAAA,CAAA;AAChC,WAAO,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,OAAN;EADA,CAAlC;;EAQA,MAAA,GAAS,QAAA,CAAC,CAAD,EAAG,MAAH,CAAA;IACP,GAAG,CAAC,IAAJ,CAAS,CAAC,MAAD,CAAT,EAAmB,sBAAnB,EAAF;;WAEE,MAAM,CAAC,GAAP,CAAW,GAAX,EAAgB,QAAA,CAAC,GAAD,EAAM,GAAN,EAAW,IAAX,CAAA;AAClB,UAAA,QAAA,EAAA,OAAA,EAAA,MAAA,EAAA,SAAA,EAAA,IAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA;MAAI,GAAA,GAAM,OAAA,CAAQ,mBAAR,CAA4B,CAAC,aAA7B,CAA2C,GAA3C;MACN,MAAA,GAAS,GAAG,CAAC,GAAJ,CAAQ,mBAAR;MACT,QAAA,6FAAsD;MACtD,QAAA,GAAW,GAAG,CAAC,KAAK,CAAC;MACrB,QAAA,GAAW,CAAI,gBAAH,GAAmB,QAAnB,GAAiC,EAAlC,CAAA,GAAwC;MACnD,GAAG,CAAC,IAAJ,CAAS,QAAT;MACA,IAAA,GAAO,GAAG,CAAC,KAAK,CAAC;MACjB,IAAG,IAAA,KAAQ,EAAX;QAAmB,IAAA,GAAO,KAA1B;;MACA,SAAA,GAAY,GAAG,CAAC,KAAK,CAAC;MACtB,IAAG,SAAA,KAAa,EAAhB;QAAwB,SAAA,GAAY,KAApC;;MACA,OAAA,oEAA+B;MAC/B,GAAG,CAAC,MAAJ,CAAW,OAAX,EAAoB;QAAE,QAAA,EAAU,QAAZ;QAAsB,QAAA,EAAU,QAAhC;QAA0C,IAAA,EAAM,IAAhD;QAAsD,KAAA,EAAO,MAAM,CAAC,KAApE;QAA2E,OAAA,EAAQ,OAAnF;QAA4F,SAAA,EAAU,SAAtG;QAAiH,QAAA,EAAU,MAAM,CAAC;MAAlI,CAApB;IAZc,CAAhB;EAHO;;EAmBT,OAAA,CAAQ,iBAAR,CAA0B,CAAC,UAA3B,CAAsC,MAAtC;;EAEA,MAAM,CAAC,OAAP,GAAiB;AApCjB",
  "sourcesContent": [
    "express = require('express')\nrouter = express.Router()\n\nlog = require('../helpers/logger').mainLogger\nhbs = require('hbs')\n\n\nhbs.registerHelper('description', () ->\n  return this.mainPage.description[this.curLang]\n)\n\n\n\n\n\nonInit = (_,config) ->\n  log.info({config}, \"configuration object\")\n  # GET home page. \n  router.get('/', (req, res, next) ->\n    log = require('../helpers/logger').requestLogger(req)\n    fbLang = req.get('X-Facebook-Locale')\n    prefLang = req.acceptsLanguages('fr','en') ? fbLang ? 'en'\n    basePath = req.query.path\n    basePath = (if basePath?  then basePath else '') + '/'\n    log.info basePath\n    page = req.query.page\n    if page == \"\" then page = null\n    forceLang = req.query.forceLang\n    if forceLang == \"\" then forceLang = null\n    curLang = forceLang ? fbLang ? prefLang\n    res.render('index', { basePath: basePath, prefLang: prefLang, page: page, title: config.title, curLang:curLang, forceLang:forceLang, mainPage: config.mainPage  })\n    return\n  )\n\nrequire('../helpers/init').readConfig(onInit)\n \nmodule.exports = router\n\n"
  ]
}